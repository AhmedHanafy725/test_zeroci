# This workflow will install Python dependencies, run tests and lint with a variety of Python versions
# For more information see: https://help.github.com/actions/language-and-framework-guides/using-python-with-github-actions

name: Python package

on:
  push:
    branches: [ master, development-1 ]
  pull_request:
    branches: [ master ]

jobs:
  build:

    runs-on: macos-latest
    steps:
    - name: Install dependencies
      run: |
        brew install docker
        brew install python3
        brew install python3-pip
        brew install upx
        brew install patchelf
        ssh-keygen -t rsa -N "" -f ~/.ssh/id_rsa -q -P ""
        pip3 install pyinstaller --user
    - name: Lint with black
      run: |
        pip3 install black
    - name: install jsx 
      run: |
        git clone https://github.com/threefoldtech/jumpscaleX_core --branch development
        cd jumpscaleX_core/install
        sudo ./package.sh
        cd dist
        sudo ./3sdk args secret val=test
        sudo ./3sdk container install identity=test.test secret=test
        
